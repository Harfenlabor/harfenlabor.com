<article class="col-lg-8 offset-lg-2">
  <div class="post-block">
    <div class="media-wrapper">
      {{ if .Params.image }}
      <img class="img-fluid" style="height: auto" data-src="{{ .Params.Image_webp | absURL }}" src="{{ .Params.image | absURL }}">
      {{ end }}
    </div>

    <!--from here-->
    {{ if .Description }}
    <div class="synopsis_box synopsis_in_news">
      <p class="synopsis">Synopsis: {{ .Description }}</p>
      <div class="open_synopsis_box">+</div>
    </div>
    {{ end }}
    <!--to here-->

    <div class="content">

      {{ if .Params.author }}
      <p id="this_article_author" style="text-align: center; margin-bottom: 0.5em;">{{ .Params.author }}</p>
      {{ end }}
      <h1 class='articleTitle' style="text-align: center"><a class="list_article_title" href="{{ .Permalink }}">{{ if in .Title "&&" }}
          {{ $titleLines := split .Title "&&" }}
          {{ range $titleLines }}
            {{ . }}
            <br>
          {{ end }}
        {{ else }}{{ .Title }}{{ end }}</a></h1>

      <p class="summarytext">{{ if .Params.summary_text }}{{ .Params.summary_text }}{{ else }}{{ .Summary }}{{ end }}</p>
      <!--p>{{/* if eq .Params.project_category "Podcast: Between the Strings" */}}
        <p class="contenttext">{{/* .Content */}}</p>
      {{/* else */}}<p-->

      <div class="title text-center wow fadeInDown">
        <div class="border-meghna"></div>
      </div>

    </div>
  </div>
</article>

<script>
//ITALIC IN SUMMARY TEXT
var summarytext = Array.from(document.querySelectorAll('.summarytext')).pop();
if ( summarytext ) {    
  if (summarytext.innerHTML.includes('&lt;i&gt;')){
    var paragraph = document.createElement('p');
    paragraph.setAttribute('class', 'summarytext');

    var first = summarytext.innerHTML.split('&lt;i&gt;');
    var paragraphText_1 = document.createTextNode(first[0]);
    paragraph.appendChild(paragraphText_1);

    for (let i = 1; i < first.length; i++) {
      var second = first[i].split('&lt;/i&gt;');  

      var paragraphText_2 = document.createTextNode(second[0]);
      var italicSpan = document.createElement('span');
      italicSpan.setAttribute('class', 'italic');
      italicSpan.style.color = 'black!important';
      italicSpan.appendChild(paragraphText_2);
      paragraph.appendChild(italicSpan);

      var paragraphText_3 = document.createTextNode(second[1]);
      paragraph.appendChild(paragraphText_3);
    }
    summarytext.innerHTML="";
    var thisParent = summarytext.parentElement;
    thisParent.insertBefore(paragraph, thisParent.getElementsByClassName('articleTitle')[0].nextSibling);
  }
}

//MAKE AUTHOR'S NAME A CLICKABLE LINK
//var authorsNameExists = document.getElementById('this_article_author');
var authorsNameExists = Array.from(document.querySelectorAll('#this_article_author')).pop();

if ( authorsNameExists ) {
  console.log(authorsNameExists);
  /*var authors_initial = document.getElementById('this_article_author').innerHTML;
  var authors_without_by = authors_initial.replace('by ', '');

  if (authors_without_by.includes(', ')){

    document.getElementById('this_article_author').innerHTML="";
    document.getElementById('this_article_author').append('by ');

    var single_authors = authors_without_by.split(', ');

    for (let i = 0; i < single_authors.length; i++) { //for each result in "persontags"…

      data = single_authors[i].split(' ');

      for (var j = 0; j < data.length; j++) { //capitalize first letter
        data[j] = data[j].charAt(0).toUpperCase() + data[j].slice(1);
      }

      if (data.length == 4) { //rearrange
        var author = data[3] + ' ' + data[0] + ' ' + data[1] + ' ' + data[2];
      } if (data.length == 3) {
        var author = data[2] + ' ' + data[0] + ' ' + data[1];
      } if (data.length == 2) {
        var author = data[1] + ' ' + data[0];
      }

      author = author.replaceAll("-", " ");

      let name = document.createElement('a');
      let nameText = document.createTextNode(single_authors[i].replaceAll("-", " "));
      name.setAttribute('href', '..\/..\/indextag#'+author);
      if (i>0) {
        document.getElementById('this_article_author').append(', ');
      }
      name.appendChild(nameText);
      document.getElementById('this_article_author').append(name);
    }
    
  } else if (authors_without_by.includes(' with ')){

    document.getElementById('this_article_author').innerHTML="";
    document.getElementById('this_article_author').append('by ');

    var single_authors = authors_without_by.split(' with ');

    for (let i = 0; i < single_authors.length; i++) { //for each result in "persontags"…

      data = single_authors[i].split(' ');

      for (var j = 0; j < data.length; j++) { //capitalize first letter
        data[j] = data[j].charAt(0).toUpperCase() + data[j].slice(1);
      }

      if (data.length == 4) { //rearrange
        var author = data[3] + ' ' + data[0] + ' ' + data[1] + ' ' + data[2];
      } if (data.length == 3) {
        var author = data[2] + ' ' + data[0] + ' ' + data[1];
      } if (data.length == 2) {
        var author = data[1] + ' ' + data[0];
      }

      author = author.replaceAll("-", " ");

      let name = document.createElement('a');
      let nameText = document.createTextNode(single_authors[i].replaceAll("-", " "));
      name.setAttribute('href', '..\/..\/indextag#'+author);
      if (i>0) {
        document.getElementById('this_article_author').append(' with ');
      }
      name.appendChild(nameText);
      document.getElementById('this_article_author').append(name);
    }

  } else {

    data = authors_without_by.split(' ');
    for (var j = 0; j < data.length; j++) { //capitalize first letter
      data[j] = data[j].charAt(0).toUpperCase() + data[j].slice(1);
    }
    if (data.length == 4) { //rearrange
      var author = data[3] + ' ' + data[0] + ' ' + data[1] + ' ' + data[2];
    } if (data.length == 3) {
      var author = data[2] + ' ' + data[0] + ' ' + data[1];
    } if (data.length == 2) {
      var author = data[1] + ' ' + data[0];
    }

    author = author.replaceAll("-", " ");

    let name = document.createElement('a');
    let nameText = document.createTextNode(authors_without_by.replaceAll("-", " "));
    name.setAttribute('href', '..\/..\/indextag#'+author);
    name.appendChild(nameText);
    document.getElementById('this_article_author').innerHTML="";
    document.getElementById('this_article_author').append("by ", name);
  }*/
}
</script>
